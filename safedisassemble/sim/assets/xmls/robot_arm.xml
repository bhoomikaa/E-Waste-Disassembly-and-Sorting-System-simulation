<!-- Panda-like robot arm for e-waste disassembly -->
<mujoco model="disassembly_arm">
  <compiler angle="radian" meshdir="../meshes/"/>

  <option timestep="0.002" gravity="0 0 -9.81" integrator="implicitfast"/>

  <visual>
    <global offwidth="2560" offheight="1440"/>
  </visual>

  <default>
    <joint damping="1.0" armature="0.1"/>
    <geom condim="4" friction="1.0 0.005 0.0001"/>
    <motor ctrllimited="true"/>
    <default class="robot">
      <geom rgba="0.5 0.5 0.5 1"/>
    </default>
    <default class="finger">
      <geom rgba="0.3 0.3 0.3 1" friction="2.0 0.01 0.001"/>
    </default>
    <default class="visual">
      <geom contype="0" conaffinity="0" group="1"/>
    </default>
  </default>

  <asset>
    <texture name="grid" type="2d" builtin="checker" rgb1="0.32 0.33 0.35"
             rgb2="0.36 0.37 0.39" width="512" height="512"/>
    <texture name="wood_tex" type="2d" builtin="gradient" rgb1="0.55 0.42 0.28"
             rgb2="0.48 0.36 0.22" width="256" height="256"/>
    <material name="grid_mat" texture="grid" texrepeat="10 10" reflectance="0.04"
              specular="0.15" shininess="0.3"/>
    <material name="robot_mat" rgba="0.72 0.72 0.74 1" specular="0.6" shininess="0.7"
              reflectance="0.08"/>
    <material name="workbench_mat" texture="wood_tex" texrepeat="3 2" specular="0.15"
              shininess="0.2" reflectance="0.03"/>
  </asset>

  <worldbody>
    <!-- Ground plane -->
    <geom name="floor" type="plane" size="1.5 1.5 0.01" material="grid_mat"/>

    <!-- Workbench -->
    <body name="workbench" pos="0.5 0 0.4">
      <geom name="table_top" type="box" size="0.4 0.3 0.02" material="workbench_mat"
            mass="50" contype="1" conaffinity="1"/>
      <geom name="leg1" type="cylinder" size="0.03 0.2" pos="-0.35 -0.25 -0.22"
            material="workbench_mat" mass="5"/>
      <geom name="leg2" type="cylinder" size="0.03 0.2" pos="0.35 -0.25 -0.22"
            material="workbench_mat" mass="5"/>
      <geom name="leg3" type="cylinder" size="0.03 0.2" pos="-0.35 0.25 -0.22"
            material="workbench_mat" mass="5"/>
      <geom name="leg4" type="cylinder" size="0.03 0.2" pos="0.35 0.25 -0.22"
            material="workbench_mat" mass="5"/>
    </body>

    <!-- 7-DOF Robot Arm (Panda-like kinematics) -->
    <body name="base_link" pos="0 0 0.42" childclass="robot">
      <geom type="cylinder" size="0.06 0.05" mass="2"/>
      <body name="link1" pos="0 0 0.05">
        <joint name="joint1" type="hinge" axis="0 0 1" range="-2.8973 2.8973"/>
        <geom type="capsule" fromto="0 0 0 0 0 0.15" size="0.05" mass="3"/>
        <body name="link2" pos="0 0 0.15">
          <joint name="joint2" type="hinge" axis="0 1 0" range="-1.7628 1.7628"/>
          <geom type="capsule" fromto="0 0 0 0 0 0.15" size="0.045" mass="2.5"/>
          <body name="link3" pos="0 0 0.15">
            <joint name="joint3" type="hinge" axis="0 0 1" range="-2.8973 2.8973"/>
            <geom type="capsule" fromto="0 0 0 0 0 0.12" size="0.04" mass="2"/>
            <body name="link4" pos="0 0 0.12">
              <joint name="joint4" type="hinge" axis="0 -1 0" range="-3.0718 -0.0698"/>
              <geom type="capsule" fromto="0 0 0 0 0 0.12" size="0.035" mass="1.5"/>
              <body name="link5" pos="0 0 0.12">
                <joint name="joint5" type="hinge" axis="0 0 1" range="-2.8973 2.8973"/>
                <geom type="capsule" fromto="0 0 0 0 0 0.1" size="0.03" mass="1.2"/>
                <body name="link6" pos="0 0 0.1">
                  <joint name="joint6" type="hinge" axis="0 1 0" range="-0.0175 3.7525"/>
                  <geom type="capsule" fromto="0 0 0 0 0 0.08" size="0.028" mass="1"/>
                  <body name="link7" pos="0 0 0.08">
                    <joint name="joint7" type="hinge" axis="0 0 1" range="-2.8973 2.8973"/>
                    <geom type="cylinder" size="0.04 0.01" mass="0.5"/>

                    <!-- Parallel Gripper -->
                    <body name="gripper_base" pos="0 0 0.02">
                      <geom type="box" size="0.03 0.04 0.01" mass="0.3"/>

                      <!-- Left finger -->
                      <body name="left_finger" pos="0 -0.02 0.02" childclass="finger">
                        <joint name="finger_left" type="slide" axis="0 1 0"
                               range="0 0.04" damping="10" stiffness="5"/>
                        <geom type="box" size="0.015 0.005 0.03" mass="0.05"/>
                        <geom name="left_fingertip" type="box" size="0.01 0.003 0.01"
                              pos="0 0 0.04" mass="0.02"/>
                      </body>

                      <!-- Right finger -->
                      <body name="right_finger" pos="0 0.02 0.02" childclass="finger">
                        <joint name="finger_right" type="slide" axis="0 -1 0"
                               range="0 0.04" damping="10" stiffness="5"/>
                        <geom type="box" size="0.015 0.005 0.03" mass="0.05"/>
                        <geom name="right_fingertip" type="box" size="0.01 0.003 0.01"
                              pos="0 0 0.04" mass="0.02"/>
                      </body>

                      <!-- Wrist camera site -->
                      <site name="wrist_cam" pos="0 0 -0.01" euler="0 3.14159 0"
                            type="box" size="0.01 0.01 0.01" rgba="0 0 1 0.3"/>

                      <!-- End-effector site for control -->
                      <site name="ee_site" pos="0 0 0.06" type="sphere"
                            size="0.005" rgba="1 0 0 0.5"/>

                      <!-- Force/torque sensor site -->
                      <site name="ft_sensor" pos="0 0 0" type="sphere"
                            size="0.003" rgba="0 1 0 0.3"/>
                    </body>
                  </body>
                </body>
              </body>
            </body>
          </body>
        </body>
      </body>
    </body>

    <!-- Top-down camera -->
    <body name="overhead_cam_mount" pos="0.5 0 1.2">
      <site name="overhead_cam" type="box" size="0.02 0.02 0.02" rgba="0 0 1 0.3"/>
    </body>

    <!-- Lighting â€” cinematic 3-point setup -->
    <!-- Key light: bright warm overhead spotlight on the device -->
    <light name="key_light" pos="0.5 -0.3 1.4" dir="0 0.15 -1" diffuse="0.9 0.85 0.8"
           specular="0.5 0.5 0.5" cutoff="55"/>
    <!-- Fill light: softer, cooler, from the side to lift shadows -->
    <light name="fill_light" pos="-0.3 0.5 1.0" dir="0.3 -0.2 -0.8" diffuse="0.35 0.38 0.42"
           specular="0.1 0.1 0.1" cutoff="80"/>
    <!-- Rim / back light: subtle edge highlighting -->
    <light name="rim_light" pos="0.5 0.5 1.3" dir="0 -0.4 -0.8" diffuse="0.25 0.25 0.3"
           specular="0.2 0.2 0.2" cutoff="70"/>
    <!-- Ambient: low-level fill so nothing is pure black -->
    <light name="ambient" pos="0 0 2" diffuse="0.18 0.18 0.20" directional="true"/>
  </worldbody>

  <actuator>
    <motor name="act_joint1" joint="joint1" ctrlrange="-87 87"/>
    <motor name="act_joint2" joint="joint2" ctrlrange="-87 87"/>
    <motor name="act_joint3" joint="joint3" ctrlrange="-87 87"/>
    <motor name="act_joint4" joint="joint4" ctrlrange="-87 87"/>
    <motor name="act_joint5" joint="joint5" ctrlrange="-12 12"/>
    <motor name="act_joint6" joint="joint6" ctrlrange="-12 12"/>
    <motor name="act_joint7" joint="joint7" ctrlrange="-12 12"/>
    <motor name="act_finger_left" joint="finger_left" ctrlrange="0 0.04"/>
    <motor name="act_finger_right" joint="finger_right" ctrlrange="0 0.04"/>
  </actuator>

  <sensor>
    <jointpos name="joint1_pos" joint="joint1"/>
    <jointpos name="joint2_pos" joint="joint2"/>
    <jointpos name="joint3_pos" joint="joint3"/>
    <jointpos name="joint4_pos" joint="joint4"/>
    <jointpos name="joint5_pos" joint="joint5"/>
    <jointpos name="joint6_pos" joint="joint6"/>
    <jointpos name="joint7_pos" joint="joint7"/>
    <jointvel name="joint1_vel" joint="joint1"/>
    <jointvel name="joint2_vel" joint="joint2"/>
    <jointvel name="joint3_vel" joint="joint3"/>
    <jointvel name="joint4_vel" joint="joint4"/>
    <jointvel name="joint5_vel" joint="joint5"/>
    <jointvel name="joint6_vel" joint="joint6"/>
    <jointvel name="joint7_vel" joint="joint7"/>
    <touch name="left_finger_touch" site="ft_sensor"/>
  </sensor>
</mujoco>
